"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[391],{625:(e,t,a)=>{a.d(t,{A:()=>o,O:()=>h});var n=a(43),s=a(291),i=a(673),r=a(77),l=a(579);const d=(0,n.createContext)(void 0),c=()=>{const e=localStorage.getItem("user");return e?JSON.parse(e):null},h=e=>{let{children:t}=e;const[a,h]=(0,n.useState)(c()),[o,m]=(0,n.useState)(!!c()),[u,j]=(0,n.useState)(!0),x=e=>{h(e),(e=>{e?localStorage.setItem("user",JSON.stringify(e)):localStorage.removeItem("user")})(e),m(!!e)};(0,n.useEffect)((()=>{(async()=>{try{await(0,i.S3)();if(await s.j2.checkIsAuthenticated()){const e=await s.j2.getProfile();x({id:e.data.id,username:e.data.username,firstName:e.data.firstName,lastName:e.data.lastName,email:e.data.email,dateOfBirth:e.data.dateOfBirth,profileImage:e.data.profileImage})}else x(null)}catch(e){x(null)}finally{j(!1)}})()}),[]);return(0,l.jsx)(d.Provider,{value:{user:a,isAuthenticated:o,isLoading:u,login:async(e,t)=>{try{await(0,i.S3)();const a=await s.j2.login(e,t);x({id:a.data.id,username:a.data.username,firstName:a.data.firstName,lastName:a.data.lastName,email:a.data.email,dateOfBirth:a.data.dateOfBirth,profileImage:a.data.profileImage}),r.q.invalidate(/^recommendations:/),r.q.invalidate(/^recipes:/)}catch(a){throw a}},signup:async e=>{try{await(0,i.S3)();const t=await s.j2.register(e);x(t.data)}catch(t){throw t}},logout:async()=>{try{await s.j2.logout(),r.q.invalidate(/^recommendations:/),r.q.invalidate(/^recipes:/),x(null)}catch(e){throw r.q.invalidate(/^recommendations:/),r.q.invalidate(/^recipes:/),x(null),e}},updateUser:e=>{x(e)}},children:t})},o=()=>{const e=(0,n.useContext)(d);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}},772:(e,t,a)=>{a.r(t),a.d(t,{default:()=>g});var n=a(43),s=a(180),i=a(625),r=a(579);const l=(0,n.lazy)((()=>a.e(962).then(a.bind(a,962)))),d=(0,n.lazy)((()=>a.e(511).then(a.bind(a,511)))),c=(0,n.lazy)((()=>a.e(778).then(a.bind(a,778)))),h=(0,n.lazy)((()=>a.e(765).then(a.bind(a,765)))),o=(0,n.lazy)((()=>a.e(218).then(a.bind(a,80)))),m=(0,n.lazy)((()=>a.e(604).then(a.bind(a,604)))),u=(0,n.lazy)((()=>a.e(197).then(a.bind(a,197)))),j=(0,n.lazy)((()=>a.e(845).then(a.bind(a,845)))),x=(0,n.lazy)((()=>a.e(998).then(a.bind(a,998)))),f=(0,n.lazy)((()=>a.e(159).then(a.bind(a,159)))),p=()=>{const[e,t]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1500);return()=>clearTimeout(e)}),[]),e?(0,r.jsxs)("div",{className:"min-h-screen bg-red-400 flex flex-col items-center justify-center",children:[(0,r.jsx)("div",{className:"loading loading-bars loading-lg text-white"}),(0,r.jsx)("div",{className:"mt-4 text-white font-medium",children:"Loading"})]}):(0,r.jsx)("div",{className:"min-h-screen bg-red-400"})};const g=function(){return(0,r.jsx)(i.O,{children:(0,r.jsx)(s.Kd,{children:(0,r.jsx)("div",{className:"min-h-screen bg-red-400",children:(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)(p,{}),children:(0,r.jsxs)(s.BV,{children:[(0,r.jsx)(s.qh,{path:"/",element:(0,r.jsx)(l,{})}),(0,r.jsx)(s.qh,{path:"/home",element:(0,r.jsx)(d,{})}),(0,r.jsx)(s.qh,{path:"/signup",element:(0,r.jsx)(c,{})}),(0,r.jsx)(s.qh,{path:"/login",element:(0,r.jsx)(h,{})}),(0,r.jsx)(s.qh,{path:"/dietary-preferences",element:(0,r.jsx)(o,{})}),(0,r.jsx)(s.qh,{path:"/recipe/:id",element:(0,r.jsx)(m,{})}),(0,r.jsx)(s.qh,{path:"/profile",element:(0,r.jsx)(u,{})}),(0,r.jsx)(s.qh,{path:"/favorites",element:(0,r.jsx)(j,{})}),(0,r.jsx)(s.qh,{path:"/ingredient-recommendations",element:(0,r.jsx)(x,{})}),(0,r.jsx)(s.qh,{path:"/recipes",element:(0,r.jsx)(f,{})})]})})})})})}}}]);
//# sourceMappingURL=391.f9936356.chunk.js.map