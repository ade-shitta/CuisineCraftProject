"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[511],{511:(e,t,s)=>{s.r(t),s.d(t,{default:()=>c});var l=s(43),r=s(180),i=s(625),a=s(526),o=s(291),n=s(579);const d=()=>(0,n.jsx)("div",{className:"flex-shrink-0 transform w-40 h-40",children:(0,n.jsx)("div",{className:"relative w-40 h-40 rounded-xl overflow-hidden shadow-md bg-gray-200 animate-pulse",children:(0,n.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-xl py-2",children:(0,n.jsx)("div",{className:"w-3/4 h-4 bg-gray-200 mx-auto"})})})}),c=()=>{const{user:e,isAuthenticated:t,isLoading:s}=(0,i.A)(),c=(0,r.Zp)(),h=(0,r.zy)(),[m,x]=(0,l.useState)(""),[u,v]=(0,l.useState)([]),[g,f]=(0,l.useState)([]),[w,p]=(0,l.useState)([]),[j,b]=(0,l.useState)(!0),[y,N]=(0,l.useState)(!0),k=(0,l.useRef)(null),C=(0,l.useRef)(null);(0,l.useEffect)((()=>{s||t||c("/login")}),[t,c,s]);(0,l.useEffect)((()=>{t&&((async()=>{if(t){b(!0);try{const e=await o.Jl.getRecommended(12);Array.isArray(e.data)?f(e.data.map((e=>({id:e.recipe_id,title:e.title,image:e.image_url,isFavorite:e.isFavorite})))):(console.error("Error: Recommendations data is not an array",e),f([]))}catch(e){console.error("Error fetching recommendations:",e)}finally{b(!1)}}})(),(async()=>{if(t){N(!0);try{const e=await o._e.getFavorites();p(e.data.map((e=>({id:e.recipe_id,title:e.title,image:e.image_url,isFavorite:!0}))))}catch(e){console.error("Error fetching favorites:",e)}finally{N(!1)}}})())}),[t,c,h.key,null===e||void 0===e?void 0:e.id]),(0,l.useEffect)((()=>{const e=new Set(w.map((e=>e.id)));f((t=>t.map((t=>({...t,isFavorite:e.has(t.id)})))))}),[w]);const L=async e=>{try{await o._e.toggleFavorite(e),v((t=>t.map((t=>t.id===e?{...t,isFavorite:!t.isFavorite}:t)))),f((t=>t.map((t=>t.id===e?{...t,isFavorite:!t.isFavorite}:t))));if(w.some((t=>t.id===e)))p((t=>t.filter((t=>t.id!==e))));else{const e=await o._e.getFavorites();p(e.data.map((e=>({id:e.recipe_id,title:e.title,image:e.image_url,isFavorite:!0}))))}}catch(t){console.error("Error toggling favorite:",t)}},R=(e,t)=>{if(!e.current)return;const s=e.current;s.style.scrollBehavior="auto";const l="left"===t?s.scrollLeft-144:s.scrollLeft+144;setTimeout((()=>{s.style.scrollBehavior="smooth",s.scrollLeft=l}),0)};return s?(0,n.jsx)("div",{className:"min-h-screen bg-red-400 flex items-center justify-center",children:(0,n.jsx)("div",{className:"loading loading-spinner loading-lg text-white"})}):(0,n.jsxs)("div",{className:"min-h-screen bg-red-400 p-4 md:p-6",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-8 px-1",children:[(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsxs)("div",{className:"text-center flex-1",children:[(0,n.jsxs)("h1",{className:"text-white text-2xl font-bold",children:["Hi! ",(null===e||void 0===e?void 0:e.username)||"Guest"]}),(0,n.jsx)("p",{className:"text-white/80 mt-1",children:"What are we cooking today?"})]}),(0,n.jsx)("div",{className:"flex-1 flex justify-end pt-1",children:(0,n.jsx)(a.A,{})})]}),(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("button",{onClick:()=>c("/recipes"),className:"btn bg-red-500 hover:bg-red-600 text-white border-none rounded-lg shadow-md px-6 py-3 font-medium flex items-center",children:["Discover Recipes",(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,n.jsx)("button",{className:"btn btn-circle bg-red-500 hover:bg-red-600 text-white border-none hover:scale-105 transition-all duration-300 shadow-md",onClick:()=>R(k,"right"),"aria-label":"Scroll recipes right",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),(0,n.jsx)("div",{ref:k,className:"flex gap-4 overflow-x-auto hide-scrollbar pb-2",style:{scrollBehavior:"smooth"},children:j?Array(6).fill(0).map(((e,t)=>(0,n.jsx)(d,{},`skeleton-${t}`))):g.map((e=>(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsxs)("div",{className:"w-48 rounded-lg overflow-hidden shadow-md bg-white",onClick:()=>c(`/recipe/${e.id}`),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-36 object-cover"}),(0,n.jsx)("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-1.5 shadow-sm",onClick:t=>{t.stopPropagation(),L(e.id)},"aria-label":e.isFavorite?"Remove from favorites":"Add to favorites",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 "+(e.isFavorite?"text-red-500":"text-gray-400"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]}),(0,n.jsx)("div",{className:"p-2 text-center",children:(0,n.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title})})]})},e.id)))})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,n.jsxs)("button",{className:"btn bg-red-500 hover:bg-red-600 text-white border-none rounded-lg shadow-md px-6 py-3 font-medium flex items-center",children:["Favourites",(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),(0,n.jsx)("button",{className:"btn btn-circle bg-red-500 hover:bg-red-600 text-white border-none hover:scale-105 transition-all duration-300 shadow-md",onClick:()=>R(C,"right"),"aria-label":"Scroll favorites right",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]}),(0,n.jsx)("div",{ref:C,className:"flex gap-4 overflow-x-auto hide-scrollbar pb-2",style:{scrollBehavior:"smooth"},children:y?Array(3).fill(0).map(((e,t)=>(0,n.jsx)(d,{},`fav-skeleton-${t}`))):0===w.length?(0,n.jsx)("div",{className:"w-full text-center py-8",children:(0,n.jsx)("p",{className:"text-white",children:"No favorites yet. Heart recipes to see them here!"})}):w.map((e=>(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsxs)("div",{className:"w-48 rounded-lg overflow-hidden shadow-md bg-white",onClick:()=>c(`/recipe/${e.id}`),children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-36 object-cover"}),(0,n.jsx)("button",{className:"absolute top-2 right-2 bg-white/80 rounded-full p-1.5 shadow-sm",onClick:t=>{t.stopPropagation(),L(e.id)},"aria-label":"Remove from favorites",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]}),(0,n.jsx)("div",{className:"p-2 text-center",children:(0,n.jsx)("p",{className:"text-sm font-medium text-gray-800",children:e.title})})]})},e.id)))})]})]})}},526:(e,t,s)=>{s.d(t,{A:()=>o});var l=s(43),r=s(180),i=s(625),a=s(579);const o=e=>{let{showMenu:t=!0}=e;const{user:s,logout:o}=(0,i.A)(),n=(0,r.Zp)(),d=(0,r.zy)(),[c,h]=(0,l.useState)(!1),m=(0,l.useRef)(null),x=d.pathname;(0,l.useEffect)((()=>{function e(e){m.current&&!m.current.contains(e.target)&&h(!1)}return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[c]);return(0,a.jsx)("div",{children:t&&(0,a.jsxs)("div",{ref:m,children:[(0,a.jsx)("button",{onClick:()=>{h(!c)},className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-md","aria-label":"Menu",title:"Menu",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&(0,a.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-20",children:[(0,a.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700",children:["Hi, ",(null===s||void 0===s?void 0:s.username)||"Guest"]}),(0,a.jsx)("hr",{className:"my-1"}),"/home"!==x&&(0,a.jsx)("button",{onClick:()=>{n("/home"),h(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Home"}),"/profile"!==x&&(0,a.jsx)("button",{onClick:()=>{n("/profile"),h(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile"}),"/ingredient-recommendations"!==x&&(0,a.jsx)("button",{onClick:()=>{n("/ingredient-recommendations"),h(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Search by Ingredient"}),(0,a.jsx)("hr",{className:"my-1"}),(0,a.jsx)("button",{onClick:()=>{o(),n("/"),h(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-100",children:"Logout"})]})]})})}}}]);
//# sourceMappingURL=511.ccf5ae03.chunk.js.map