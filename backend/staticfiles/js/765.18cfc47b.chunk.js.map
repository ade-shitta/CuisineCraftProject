{"version":3,"file":"static/js/765.18cfc47b.chunk.js","mappings":"gLASA,MAmLA,EAnLkBA,KAChB,MAAMC,GAAWC,EAAAA,EAAAA,OACX,MAAEC,IAAUC,EAAAA,EAAAA,MAEXC,EAAUC,IAAeC,EAAAA,EAAAA,UAAS,CACvCC,SAAU,GACVC,SAAU,MAGLC,EAAQC,IAAaJ,EAAAA,EAAAA,UAAiC,CAAC,IACvDK,EAAcC,IAAmBN,EAAAA,EAAAA,WAAS,IAC1CO,EAAWC,IAAgBR,EAAAA,EAAAA,WAAS,IACpCS,EAAcC,IAAmBV,EAAAA,EAAAA,WAAS,IAGjDW,EAAAA,EAAAA,YAAU,KAAO,IAADC,EAC4B,QAA1CA,EAAAC,SAASC,cAAc,2BAAmB,IAAAF,GAA1CA,EAA4CG,UAAUC,IAAI,kBAAkB,GAC3E,IAEH,MAAMC,EAAgBC,IACpB,MAAM,KAAEC,EAAI,MAAEC,GAAUF,EAAEG,OAC1BtB,GAAauB,IAAI,IAAWA,EAAM,CAACH,GAAOC,MAGtCjB,EAAOgB,IACTf,GAAWkB,IACT,MAAMC,EAAY,IAAKD,GAEvB,cADOC,EAAUJ,GACVI,CAAS,GAEpB,EAqDIC,EAAeC,IAAA,IAAC,QAAEC,GAA8BD,EAAA,OACpDE,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0FAAyFC,UACtGF,EAAAA,EAAAA,KAAA,KAAAE,SAAIH,KACA,EAGR,OACEC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,yFAAyFE,MAAO,CAAEC,gBAAiB,WAAYF,UAC5IG,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,mHAAmHE,MAAO,CAAEG,kBAAmB,QAASJ,SAAA,EACrKF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,gGAA+FC,SAAC,UAE7G1B,EAAO+B,OAAQP,EAAAA,EAAAA,KAACH,EAAY,CAACE,QAASvB,EAAO+B,QAE9CF,EAAAA,EAAAA,MAAA,QAAMG,SArDSC,UAGnB,GAFAlB,EAAEmB,iBAXaC,MACf,MAAMf,EAAoC,CAAC,EAM3C,OAJKzB,EAASG,WAAUsB,EAAUtB,SAAW,wBACxCH,EAASI,WAAUqB,EAAUrB,SAAW,wBAE7CE,EAAUmB,GAC+B,IAAlCgB,OAAOC,KAAKjB,GAAWkB,MAAY,EAMtCH,GACF,IACE9B,GAAa,SAEPkC,EAAAA,EAAAA,YACA9C,EAAME,EAASG,SAAUH,EAASI,UAGxCQ,GAAgB,GAChBiC,YAAW,KACTjD,EAAS,QAAQ,GAChB,IACL,CAAE,MAAOkD,GAAa,IAADC,EAAAC,EACnBC,QAAQH,MAAM,eAAgBA,GAC9B,MAAMI,GAAyB,QAAdH,EAAAD,EAAMK,gBAAQ,IAAAJ,GAAM,QAANC,EAAdD,EAAgBK,YAAI,IAAAJ,OAAN,EAAdA,EAAsBK,SAAU,+BACjD/C,EAAU,CAAE8B,KAAMc,IAGlB,MAAMd,EAAOrB,SAASC,cAAc,eAChC,OAAJoB,QAAI,IAAJA,GAAAA,EAAMnB,UAAUC,IAAI,iBACpB2B,YAAW,KACL,OAAJT,QAAI,IAAJA,GAAAA,EAAMnB,UAAUqC,OAAO,gBAAgB,GACtC,IACL,CAAC,QACC5C,GAAa,EACf,KACK,CAEL,MAAM0B,EAAOrB,SAASC,cAAc,eAChC,OAAJoB,QAAI,IAAJA,GAAAA,EAAMnB,UAAUC,IAAI,iBACpB2B,YAAW,KACL,OAAJT,QAAI,IAAJA,GAAAA,EAAMnB,UAAUqC,OAAO,gBAAgB,GACtC,IACL,GAiBkCxB,UAAW,qDAAoDnB,EAAe,sBAAwB,IAAKoB,SAAA,EACvIG,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,wEAAuEC,SAAC,cACzFF,EAAAA,EAAAA,KAAA,SACE0B,KAAK,OACLlC,KAAK,WACLmC,YAAY,sBACZ1B,UAAU,yNACVR,MAAOtB,EAASG,SAChBsD,SAAUtC,IAEXd,EAAOF,WAAY0B,EAAAA,EAAAA,KAACH,EAAY,CAACE,QAASvB,EAAOF,eAGpD+B,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,aAAYC,SAAA,EACzBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,wEAAuEC,SAAC,cACzFG,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE0B,KAAMhD,EAAe,OAAS,WAC9Bc,KAAK,WACLmC,YAAY,mDACZ1B,UAAU,+NACVR,MAAOtB,EAASI,SAChBqD,SAAUtC,KAEZU,EAAAA,EAAAA,KAAA,UACE0B,KAAK,SACLzB,UAAU,oHACV4B,QAASA,IAAMlD,GAAiBD,GAChC,aAAYA,EAAe,gBAAkB,gBAAgBwB,SAE5DxB,GACC2B,EAAAA,EAAAA,MAAA,OAAKyB,MAAM,6BAA6B7B,UAAU,sEAAsE8B,QAAQ,YAAYC,KAAK,eAAc9B,SAAA,EAC7JF,EAAAA,EAAAA,KAAA,QAAMiC,EAAE,qCACRjC,EAAAA,EAAAA,KAAA,QAAMkC,SAAS,UAAUD,EAAE,0IAA0IE,SAAS,gBAGhL9B,EAAAA,EAAAA,MAAA,OAAKyB,MAAM,6BAA6B7B,UAAU,sEAAsE8B,QAAQ,YAAYC,KAAK,eAAc9B,SAAA,EAC7JF,EAAAA,EAAAA,KAAA,QAAMkC,SAAS,UAAUD,EAAE,+PAA+PE,SAAS,aACnSnC,EAAAA,EAAAA,KAAA,QAAMiC,EAAE,wJAKfzD,EAAOD,WAAYyB,EAAAA,EAAAA,KAACH,EAAY,CAACE,QAASvB,EAAOD,eAGpDyB,EAAAA,EAAAA,KAAA,UACE0B,KAAK,SACLzB,UAAW,uPAAsPrB,EAAY,gCAAkC,IAC/SwD,SAAUxD,EAAUsB,SAEnBtB,GACCyB,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,mCAAkCC,SAAA,EAC/CG,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,6CAA6C6B,MAAM,6BAA6BE,KAAK,OAAOD,QAAQ,YAAW7B,SAAA,EAC5HF,EAAAA,EAAAA,KAAA,UAAQC,UAAU,aAAaoC,GAAG,KAAKC,GAAG,KAAKC,EAAE,KAAKC,OAAO,eAAeC,YAAY,OACxFzC,EAAAA,EAAAA,KAAA,QAAMC,UAAU,aAAa+B,KAAK,eAAeC,EAAE,uHAC/C,mBAGNnD,GACFuB,EAAAA,EAAAA,MAAA,OAAKJ,UAAU,mCAAkCC,SAAA,EAC/CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA8B+B,KAAK,OAAOQ,OAAO,eAAeT,QAAQ,YAAYD,MAAM,6BAA4B5B,UACnIF,EAAAA,EAAAA,KAAA,QAAM0C,cAAc,QAAQC,eAAe,QAAQF,YAAY,IAAIR,EAAE,qBACjE,cAIR,YAIJjC,EAAAA,EAAAA,KAAA,OAAKC,UAAU,0CAAyCC,UACtDG,EAAAA,EAAAA,MAAA,KAAAH,SAAA,CAAG,2BACsBF,EAAAA,EAAAA,KAAA,KAAG4C,KAAK,UAAU3C,UAAU,2HAA0HC,SAAC,6BAKlL,C","sources":["pages/LoginPage.tsx"],"sourcesContent":["\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useNavigate } from \"react-router-dom\"\r\nimport { useAuth } from \"../context/AuthContext\"\r\nimport { fetchCSRFToken } from \"../services/csrf\"\r\n\r\nconst LoginPage = () => {\r\n  const navigate = useNavigate()\r\n  const { login } = useAuth()\r\n\r\n  const [formData, setFormData] = useState({\r\n    username: \"\",\r\n    password: \"\",\r\n  })\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n  const [showPassword, setShowPassword] = useState(false)\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [loginSuccess, setLoginSuccess] = useState(false)\r\n\r\n  // Animation on mount\r\n  useEffect(() => {\r\n    document.querySelector('.login-container')?.classList.add('animate-fade-in')\r\n  }, [])\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target\r\n    setFormData((prev) => ({ ...prev, [name]: value }))\r\n\r\n    // Clear error when user types\r\n    if (errors[name]) {\r\n      setErrors((prev) => {\r\n        const newErrors = { ...prev }\r\n        delete newErrors[name]\r\n        return newErrors\r\n      })\r\n    }\r\n  }\r\n\r\n  const validate = () => {\r\n    const newErrors: Record<string, string> = {}\r\n\r\n    if (!formData.username) newErrors.username = \"Username is required\"\r\n    if (!formData.password) newErrors.password = \"Password is required\"\r\n\r\n    setErrors(newErrors)\r\n    return Object.keys(newErrors).length === 0\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (validate()) {\r\n      try {\r\n        setIsLoading(true);\r\n        // Before login, ensure we have a fresh CSRF token\r\n        await fetchCSRFToken();\r\n        await login(formData.username, formData.password);\r\n        \r\n        // Show success animation before navigating\r\n        setLoginSuccess(true);\r\n        setTimeout(() => {\r\n          navigate(\"/home\");\r\n        }, 800);\r\n      } catch (error: any) {\r\n        console.error(\"Login error:\", error);\r\n        const errorMsg = error.response?.data?.detail || \"Invalid username or password\";\r\n        setErrors({ form: errorMsg });\r\n        \r\n        // Shake animation for error\r\n        const form = document.querySelector('.login-form');\r\n        form?.classList.add('animate-shake');\r\n        setTimeout(() => {\r\n          form?.classList.remove('animate-shake');\r\n        }, 500);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    } else {\r\n      // Shake animation for validation errors\r\n      const form = document.querySelector('.login-form');\r\n      form?.classList.add('animate-shake');\r\n      setTimeout(() => {\r\n        form?.classList.remove('animate-shake');\r\n      }, 500);\r\n    }\r\n  };\r\n\r\n  // Create error message component for consistent styling\r\n  const ErrorMessage = ({ message }: { message: string }) => (\r\n    <div className=\"error-message text-red-100 bg-red-500 bg-opacity-50 p-2 rounded-md mt-1 animate-fade-in\">\r\n      <p>{message}</p>\r\n    </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"min-h-screen flex flex-col items-center justify-center p-4 transition-all duration-500\" style={{ backgroundColor: \"#ff7b7b\" }}>\r\n      <div className=\"login-container w-full max-w-md bg-transparent p-8 opacity-0 transition-all duration-700 transform translate-y-4\" style={{ animationDuration: '0.7s' }}>\r\n        <h1 className=\"text-white text-3xl font-bold mb-6 text-center transition-all duration-300 hover:text-red-100\">Login</h1>\r\n\r\n        {errors.form && <ErrorMessage message={errors.form} />}\r\n\r\n        <form onSubmit={handleSubmit} className={`login-form space-y-4 transition-all duration-300 ${loginSuccess ? 'scale-105 opacity-0' : ''}`}>\r\n          <div className=\"form-group\">\r\n            <label className=\"block text-white mb-2 transition-all duration-300 hover:translate-x-1\">Username</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"username\"\r\n              placeholder=\"Enter your username\"\r\n              className=\"form-input w-full py-3 px-4 rounded-3xl bg-white bg-opacity-90 border-2 border-transparent focus:border-red-400 text-gray-800 transition-all duration-300 focus:shadow-lg focus:outline-none transform hover:scale-101\"\r\n              value={formData.username}\r\n              onChange={handleChange}\r\n            />\r\n            {errors.username && <ErrorMessage message={errors.username} />}\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label className=\"block text-white mb-2 transition-all duration-300 hover:translate-x-1\">Password</label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type={showPassword ? \"text\" : \"password\"}\r\n                name=\"password\"\r\n                placeholder=\"••••••••\"\r\n                className=\"form-input w-full py-3 px-4 rounded-3xl bg-white bg-opacity-90 border-2 border-transparent focus:border-red-400 pr-10 text-gray-800 transition-all duration-300 focus:shadow-lg focus:outline-none transform hover:scale-101\"\r\n                value={formData.password}\r\n                onChange={handleChange}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                className=\"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-700 hover:text-red-500 transition-colors duration-300\"\r\n                onClick={() => setShowPassword(!showPassword)}\r\n                aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n              >\r\n                {showPassword ? (\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 transform hover:scale-110 transition-transform duration-300\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path d=\"M10 12a2 2 0 100-4 2 2 0 000 4z\" />\r\n                    <path fillRule=\"evenodd\" d=\"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 transform hover:scale-110 transition-transform duration-300\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                    <path fillRule=\"evenodd\" d=\"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z\" clipRule=\"evenodd\" />\r\n                    <path d=\"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n            </div>\r\n            {errors.password && <ErrorMessage message={errors.password} />}\r\n          </div>\r\n\r\n          <button \r\n            type=\"submit\" \r\n            className={`login-button w-full py-3 px-4 bg-red-500 hover:bg-red-600 text-white border-none rounded-3xl text-lg mt-5 transition-all duration-300 transform hover:scale-105 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-red-300 active:scale-95 ${isLoading ? 'opacity-70 cursor-not-allowed' : ''}`}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? (\r\n              <div className=\"flex items-center justify-center\">\r\n                <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                  <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                  <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                </svg>\r\n                Logging in...\r\n              </div>\r\n            ) : loginSuccess ? (\r\n              <div className=\"flex items-center justify-center\">\r\n                <svg className=\"w-6 h-6 mr-2 text-green-200\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\r\n                </svg>\r\n                Success!\r\n              </div>\r\n            ) : (\r\n              \"Log In\"\r\n            )}\r\n          </button>\r\n\r\n          <div className=\"text-center text-white mt-5 signup-link\">\r\n            <p>\r\n              Don't Have An Account? <a href=\"/signup\" className=\"text-blue-300 hover:text-blue-100 hover:underline transition-all duration-300 transform inline-block hover:translate-x-1\">Sign Up Here</a>\r\n            </p>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginPage"],"names":["LoginPage","navigate","useNavigate","login","useAuth","formData","setFormData","useState","username","password","errors","setErrors","showPassword","setShowPassword","isLoading","setIsLoading","loginSuccess","setLoginSuccess","useEffect","_document$querySelect","document","querySelector","classList","add","handleChange","e","name","value","target","prev","newErrors","ErrorMessage","_ref","message","_jsx","className","children","style","backgroundColor","_jsxs","animationDuration","form","onSubmit","async","preventDefault","validate","Object","keys","length","fetchCSRFToken","setTimeout","error","_error$response","_error$response$data","console","errorMsg","response","data","detail","remove","type","placeholder","onChange","onClick","xmlns","viewBox","fill","d","fillRule","clipRule","disabled","cx","cy","r","stroke","strokeWidth","strokeLinecap","strokeLinejoin","href"],"sourceRoot":""}