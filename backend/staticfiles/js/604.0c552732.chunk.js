"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[604],{274:(e,t,s)=>{s.d(t,{A:()=>n});var l=s(43),r=s(579);const i=e=>{let{size:t="md",color:s="white",message:l}=e;const i={sm:"8px",md:"10px",lg:"12px"};return(0,r.jsx)("div",{className:"min-h-screen bg-red-400 flex flex-col items-center justify-center",children:(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"flex space-x-3",children:[...Array(3)].map(((e,l)=>(0,r.jsx)("div",{className:`bg-${s} rounded-full animate-bounce`,style:{width:i[t],height:i[t],animationDelay:.1*l+"s"}},l)))}),l&&(0,r.jsx)("div",{className:`mt-4 text-${s} ${{sm:"text-sm",md:"text-base",lg:"text-xl"}[t]} font-medium loading-dots`,children:l})]})})},n=l.memo(i)},526:(e,t,s)=>{s.d(t,{A:()=>a});var l=s(43),r=s(180),i=s(625),n=s(579);const a=e=>{let{showMenu:t=!0}=e;const{user:s,logout:a}=(0,i.A)(),o=(0,r.Zp)(),d=(0,r.zy)(),[c,m]=(0,l.useState)(!1),x=(0,l.useRef)(null),u=d.pathname;(0,l.useEffect)((()=>{function e(e){x.current&&!x.current.contains(e.target)&&m(!1)}return c&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[c]);return(0,n.jsx)("div",{children:t&&(0,n.jsxs)("div",{ref:x,children:[(0,n.jsx)("button",{onClick:()=>{m(!c)},className:"w-10 h-10 bg-white rounded-full flex items-center justify-center shadow-md","aria-label":"Menu",title:"Menu",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&(0,n.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-20",children:[(0,n.jsxs)("div",{className:"px-4 py-2 text-sm text-gray-700",children:["Hi, ",(null===s||void 0===s?void 0:s.username)||"Guest"]}),(0,n.jsx)("hr",{className:"my-1"}),"/home"!==u&&(0,n.jsx)("button",{onClick:()=>{o("/home"),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Home"}),"/profile"!==u&&(0,n.jsx)("button",{onClick:()=>{o("/profile"),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Profile"}),"/ingredient-recommendations"!==u&&(0,n.jsx)("button",{onClick:()=>{o("/ingredient-recommendations"),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Search by Ingredient"}),(0,n.jsx)("hr",{className:"my-1"}),(0,n.jsx)("button",{onClick:()=>{a(),o("/"),m(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-500 hover:bg-gray-100",children:"Logout"})]})]})})}},604:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var l=s(43),r=s(180),i=s(526),n=s(291),a=s(625),o=s(274),d=s(579);const c=e=>{let{rawInstructions:t,recipeId:s,onComplete:r}=e;const i=l.useMemo((()=>t.map((e=>e.trim())).filter((e=>e&&!/^\d+\.?\s*$/.test(e))).map((e=>({text:e,completed:!1})))),[t]),[n,a]=(0,l.useState)(i),[o,c]=(0,l.useState)(!1),[m,x]=(0,l.useState)(!1),u=n.filter((e=>e.completed)).length/n.length,h=n.every((e=>e.completed));return(0,d.jsxs)("div",{className:"recipe-instructions",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Instructions"}),(0,d.jsx)("button",{onClick:()=>c(!o),className:"px-3 py-1 rounded-full text-sm font-medium "+(o?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:o?"Exit Cooking Mode":"Start Cooking"})]}),o&&n.length>0&&(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,d.jsx)("div",{className:"bg-red-500 h-2.5 rounded-full transition-all duration-300 ease-in-out",style:{width:100*u+"%"}})}),(0,d.jsxs)("p",{className:"text-sm text-gray-500 mt-1 text-right",children:[Math.round(100*u),"% complete"]})]}),(0,d.jsx)("ul",{className:"space-y-4",children:n.map(((e,t)=>(0,d.jsx)("li",{className:`p-3 rounded-lg transition-all duration-200 cursor-pointer ${o?"bg-white shadow-sm border border-gray-100":""} ${e.completed?"bg-green-50":""}`,onClick:()=>o&&(e=>{const t=[...n];t[e].completed=!t[e].completed,a(t),t.every((e=>e.completed))&&!m&&r&&(r(s),x(!0))})(t),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[o&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"flex-shrink-0 w-5 h-5 border border-gray-300 rounded bg-white overflow-hidden relative",style:{minWidth:"1.25rem"},children:e.completed&&(0,d.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,d.jsx)("span",{className:"ml-2 "+(e.completed?"line-through text-gray-400":"text-gray-800"),children:e.text})]}),!o&&(0,d.jsx)("span",{className:"text-gray-800",children:e.text})]})},t)))}),h&&o&&(0,d.jsx)("div",{className:"mt-6 p-4 bg-green-100 text-green-700 rounded-lg text-center",children:(0,d.jsx)("p",{className:"font-medium",children:"You've completed all the steps! Enjoy your meal! \ud83c\udf89"})})]})},m=l.memo((e=>{let{isOpen:t,onClose:s,instructions:r,recipeId:i}=e;const[a,o]=(0,l.useState)({isCompleted:!1,isSubmitting:!1,error:null});if(!t)return null;return(0,d.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center p-4 z-50",onClick:s,children:(0,d.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-lg max-h-[80vh] overflow-y-auto shadow-xl",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex justify-between items-center p-4 border-b",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Recipe Instructions"}),(0,d.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 rounded-full hover:bg-gray-100 p-1","aria-label":"Close",title:"Close",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsx)(c,{rawInstructions:r,recipeId:i,onComplete:async e=>{try{o((e=>({...e,isSubmitting:!0}))),await n._e.markRecipeCooked(e),o({isCompleted:!0,isSubmitting:!1,error:null})}catch(t){console.error("Failed to record recipe completion:",t),o({isCompleted:!1,isSubmitting:!1,error:"Failed to record your cooking achievement. Please try again."})}}}),a.error&&(0,d.jsx)("div",{className:"mt-4 p-3 bg-red-100 text-red-700 rounded-md text-sm",children:a.error})]}),(0,d.jsx)("div",{className:"border-t p-4 flex justify-end",children:(0,d.jsx)("button",{onClick:s,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-full",children:"Close"})})]})})})),x=()=>{var e;const{id:t}=(0,r.g)(),s=(0,r.Zp)(),c=(0,r.zy)(),{isAuthenticated:x,isLoading:u,user:h}=(0,a.A)(),[g,p]=(0,l.useState)(null),[f,v]=(0,l.useState)(!0),[j,b]=(0,l.useState)(""),[w,y]=(0,l.useState)(!1),[N,k]=(0,l.useState)(!1),[C,S]=(0,l.useState)(!1);(0,l.useEffect)((()=>{if(!t||!x)return;v(!0);const e=setTimeout((()=>{f&&S(!0)}),300);return(async()=>{try{const e=await n._e.getById(t),s=e.data.instructions.split("\n").filter(Boolean),l=Array.isArray(e.data.ingredients)?e.data.ingredients:[];p({...e.data,instructions:s,ingredients:l,dietary_tags:e.data.dietary_tags||[]}),v(!1)}catch(e){console.error("Error fetching recipe:",e),b("Failed to load recipe"),v(!1)}finally{S(!1)}})(),()=>clearTimeout(e)}),[t,x,c.key]),(0,l.useEffect)((()=>{u||x||s("/login")}),[u,x,s]);const L=(0,l.useCallback)((()=>y(!0)),[]),M=(0,l.useCallback)((()=>y(!1)),[]),A=(0,l.useCallback)((()=>{window.history.length>1?s(-1):s("/home")}),[s]),I=(0,l.useCallback)((async()=>{if(g)try{await n._e.toggleFavorite(g.recipe_id),p((e=>e?{...e,isFavorite:!e.isFavorite}:null))}catch(j){console.error("Error toggling favorite:",j)}}),[g]);return f?C?(0,d.jsx)(o.A,{}):null:j||!g?(0,d.jsx)("div",{className:"min-h-screen bg-red-400 flex justify-center items-center",children:(0,d.jsx)("p",{className:"text-white",children:j||"Recipe not found"})}):(0,d.jsxs)("div",{className:"min-h-screen bg-red-400 p-4",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8 px-1",children:[(0,d.jsx)("div",{className:"flex-1",children:(0,d.jsx)("button",{onClick:A,className:"bg-red-500 hover:bg-red-600 text-white rounded-full w-10 h-10 flex items-center justify-center shadow-md","aria-label":"Go back",title:"Go back",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),(0,d.jsx)("div",{className:"text-center flex-1",children:(0,d.jsx)("h1",{className:"text-white text-2xl font-bold",children:g.title})}),(0,d.jsx)("div",{className:"flex-1 flex justify-end pt-1",children:(0,d.jsx)(i.A,{})})]}),(0,d.jsx)("div",{className:"flex justify-center mb-8 px-6 relative",children:g.image_url&&(0,d.jsxs)("div",{className:"relative inline-block",children:[(0,d.jsx)("img",{src:g.image_url,alt:g.title,className:"rounded-3xl w-full max-w-md h-44 object-cover shadow-md",loading:"eager"}),(0,d.jsx)("button",{className:"absolute top-3 right-3 bg-pink-100 rounded-full p-2 shadow-md",onClick:I,"aria-label":g.isFavorite?"Remove from favorites":"Add to favorites",title:g.isFavorite?"Remove from favorites":"Add to favorites",children:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 "+(g.isFavorite?"text-red-500":"text-gray-400"),viewBox:"0 0 20 20",fill:"currentColor",children:(0,d.jsx)("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})})]})}),(0,d.jsxs)("div",{className:"px-6 pb-16",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-5",children:[(0,d.jsx)("h2",{className:"text-xl font-bold text-black",children:"Ingredients"}),(0,d.jsx)("a",{href:"#",onClick:e=>{e.preventDefault(),L()},className:"text-blue-600 hover:text-blue-800 font-medium underline",children:"View Recipe Details"})]}),(null===(e=g.ingredients)||void 0===e?void 0:e.length)>0?(0,d.jsxs)("div",{className:"bg-red-300 rounded-xl p-6",children:[(0,d.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Ingredients"}),(0,d.jsx)("ul",{className:"space-y-2",children:g.ingredients.map(((e,t)=>(0,d.jsxs)("li",{className:"flex items-start",children:[(0,d.jsx)("span",{className:"text-black text-lg mr-2",children:"\u2022"}),(0,d.jsx)("span",{className:"text-black text-lg",children:e.amount?`${e.amount} of ${e.name}`:e.name})]},t)))})]}):(0,d.jsx)("div",{className:"bg-red-300 rounded-xl p-6 text-center",children:(0,d.jsx)("p",{className:"text-black",children:"No ingredients available for this recipe"})}),(0,d.jsx)("div",{className:"mt-4 bg-yellow-100 border-l-4 border-yellow-500 p-4 rounded-md",children:(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-yellow-600 mr-2 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,d.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,d.jsx)("span",{className:"font-medium",children:"Note:"})," Nutritional values may vary depending on the specific brands and ingredients you purchase and choose to use."]})]})})]}),w&&(0,d.jsx)(m,{isOpen:w,onClose:M,instructions:(null===g||void 0===g?void 0:g.instructions)||[],recipeId:(null===g||void 0===g?void 0:g.recipe_id)||""})]})},u=l.memo(x)}}]);
//# sourceMappingURL=604.0c552732.chunk.js.map